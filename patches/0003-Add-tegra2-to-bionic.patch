From e1f3d91933a4384113c83f6586b856eed3249b53 Mon Sep 17 00:00:00 2001
From: Nikhil <nikhil@menghani.com>
Date: Thu, 19 Jun 2014 15:22:20 +0530
Subject: [PATCH] tegra2 to bionic patch

---
 libc/Android.mk                |  7 +++++++
 libc/arch-arm/tegra2/tegra2.mk | 12 ++++++------
 2 files changed, 13 insertions(+), 6 deletions(-)

diff --git a/libc/Android.mk b/libc/Android.mk
index ca6ca78..c93316b 100644
--- a/libc/Android.mk
+++ b/libc/Android.mk
@@ -182,6 +182,13 @@ libc_common_src_files := \
 	netbsd/nameser/ns_print.c \
 	netbsd/nameser/ns_samedomain.c \
 
+# cortex-a9 without neon
+ifneq ($(TARGET_CPU_VARIANT),tegra2)
+    libc_common_src_files += \
+        bionic/memchr.c \
+
+endif
+
 # Fortify implementations of libc functions.
 libc_common_src_files += \
     bionic/__fgets_chk.cpp \
diff --git a/libc/arch-arm/tegra2/tegra2.mk b/libc/arch-arm/tegra2/tegra2.mk
index aded722..5c34887 100644
--- a/libc/arch-arm/tegra2/tegra2.mk
+++ b/libc/arch-arm/tegra2/tegra2.mk
@@ -1,13 +1,13 @@
-$(call libc-add-cpu-variant-src,MEMCPY,arch-arm/tegra2/bionic/memcpy.S)
-$(call libc-add-cpu-variant-src,MEMSET,arch-arm/tegra2/bionic/memset.S)
-$(call libc-add-cpu-variant-src,STRCMP,arch-arm/tegra2/bionic/strcmp.S)
-$(call libc-add-cpu-variant-src,STRCPY,arch-arm/tegra2/bionic/strcpy.S)
+$(call libc-add-cpu-variant-src,MEMCPY,arch-arm/generic/bionic/memcpy.S)
+$(call libc-add-cpu-variant-src,MEMSET,arch-arm/generic/bionic/memset.S)
+$(call libc-add-cpu-variant-src,STRCMP,arch-arm/cortex-a15/bionic/strcmp.S)
+$(call libc-add-cpu-variant-src,STRCPY,arch-arm/generic/bionic/strcpy.S)
+$(call libc-add-cpu-variant-src,__STRCPY_CHK,bionic/__strcpy_chk.cpp)
 $(call libc-add-cpu-variant-src,MEMMOVE,bionic/memmove.c.arm)
 $(call libc-add-cpu-variant-src,BCOPY,string/bcopy.c.arm)
-
 $(call libc-add-cpu-variant-src,STRCAT,string/strcat.c)
+$(call libc-add-cpu-variant-src,__STRCAT_CHK,bionic/__strcat_chk.cpp)
 
 # armv7-a (non neon) ones from cm10.1
 $(call libc-add-cpu-variant-src,STRLEN,arch-arm/tegra2/bionic/strlen.S)
 $(call libc-add-cpu-variant-src,MEMCHR,arch-arm/tegra2/bionic/memchr.S)
-
-- 
1.9.1

